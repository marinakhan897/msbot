name: Marina AI Bot Setup

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  setup:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4

    - name: ğŸŸ¢ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'

    - name: ğŸ“¦ Install dependencies (using npm install)
      run: |
        echo "Installing dependencies..."
        npm install
        echo "âœ… Dependencies installed successfully"

    - name: ğŸ” Verify installation
      run: |
        echo "ğŸ“ Project structure:"
        ls -la
        echo ""
        echo "âœ… Node.js: $(node --version)"
        echo "âœ… npm: $(npm --version)"
        echo ""
        echo "ğŸ“¦ Installed packages:"
        npm list --depth=0

    - name: ğŸ§ª Test bot setup
      run: |
        echo "Testing imports..."
        node -e "
        try {
          const axios = require('axios');
          const dotenv = require('dotenv');
          console.log('âœ… All imports successful');
          console.log('ğŸ¯ Marina AI Bot ready!');
        } catch (error) {
          console.error('âŒ Import error:', error.message);
          process.exit(1);
        }
        "

    - name: ğŸš€ Success
      run: |
        echo "ğŸ‰ Marina AI Bot setup completed!"
        echo "ğŸ’– Ready for deployment!"
