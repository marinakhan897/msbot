name: Marina AI Bot Setup

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  setup:
    runs-on: ubuntu-latest
    
    steps:
    - name: 📥 Checkout code
      uses: actions/checkout@v4

    - name: 🟢 Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'

    - name: 📦 Install dependencies (using npm install)
      run: |
        echo "Installing dependencies..."
        npm install
        echo "✅ Dependencies installed successfully"

    - name: 🔍 Verify installation
      run: |
        echo "📁 Project structure:"
        ls -la
        echo ""
        echo "✅ Node.js: $(node --version)"
        echo "✅ npm: $(npm --version)"
        echo ""
        echo "📦 Installed packages:"
        npm list --depth=0

    - name: 🧪 Test bot setup
      run: |
        echo "Testing imports..."
        node -e "
        try {
          const axios = require('axios');
          const dotenv = require('dotenv');
          console.log('✅ All imports successful');
          console.log('🎯 Marina AI Bot ready!');
        } catch (error) {
          console.error('❌ Import error:', error.message);
          process.exit(1);
        }
        "

    - name: 🚀 Success
      run: |
        echo "🎉 Marina AI Bot setup completed!"
        echo "💖 Ready for deployment!"
